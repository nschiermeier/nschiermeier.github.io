<!DOCTYPE html>
<html>
  <head>
    <title>World of Nicholas | Blog Archive</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="../../styles.css">
    <link rel="icon" type="image/x-icon" href="../../Images/icon.png">
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
  </head>
  <body>
    <header>
      <nav>
      <a href="../">Back to main Blog Page</a>
      </nav>
      <hr>
    </header>

	<div class="blog-container">
	 <h1> The log(N-1) </h1>

     <p>The archive of my blogs. This will be where all blogs from previous quarters can be found. <a href="../">Back to main Blog Page</a></p>
	 
	 <div id="archive-posts"></div>
	
	</div>
	
  <script>
		async function loadArchive() {
		  try {
			const response = await fetch('/blog/posts.json');
			const posts = await response.json();
			const container = document.getElementById("archive-posts");
			const archived = posts.filter(p => p.status === "archived");

			for (const post of archived) {
			  post.file = '/blog/${post.file}';
			  const mdResponse = await fetch(post.file);
			  const mdText = await mdResponse.text();
			  const html = marked.parse(mdText);

			  const div = document.createElement("div");
			  div.classList.add("post");
			  div.innerHTML = `
				<div class="date">${post.date}</div>
				<h2>${post.title}</h2>
				<div class="full-post">
				  ${html}
				</div>
			  `;
			  container.appendChild(div);
			}
		} catch (error) {
		  console.error('Error loading Posts:', error);
		  document.getElementById('archive-posts').innerHTML = "<p>Failed to load blog posts.</p>";
		}
	  }

    loadArchive();
  </script>
	
  </body>

</html>